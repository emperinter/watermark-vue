{"ast":null,"code":"// import watermark from 'watermarkjs';\n\nexport default {\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n      reader.onload = event => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = this.$refs.canvas;\n          const context = canvas.getContext('2d');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          context.drawImage(img, 0, 0, canvas.width, canvas.height);\n          const watermarkImg = new Image();\n          watermarkImg.onload = () => {\n            context.drawImage(watermarkImg, canvas.width / 2 - watermarkImg.width / 2, canvas.height / 2 - watermarkImg.height / 2);\n          };\n          watermarkImg.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${canvas.width} ${canvas.height}'%3E%3Ctext x='${canvas.width / 2}' y='${canvas.height / 2}' font-family='Arial' font-size='50' fill='black' text-anchor='middle' transform='rotate(-45 ${canvas.width / 2} ${canvas.height / 2})'%3EMy Custom Watermark%3C/text%3E%3C/svg%3E`;\n        };\n        img.src = event.target.result;\n      };\n      reader.readAsDataURL(file);\n    },\n    downloadImage() {\n      const canvas = this.$refs.canvas;\n      const dataURL = canvas.toDataURL('image/png');\n      const link = document.createElement('a');\n      link.download = 'watermarked-image.png';\n      link.href = dataURL;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }\n};","map":{"version":3,"names":["methods","handleFileUpload","event","file","target","files","reader","FileReader","onload","img","Image","canvas","$refs","context","getContext","width","height","drawImage","watermarkImg","src","result","readAsDataURL","downloadImage","dataURL","toDataURL","link","document","createElement","download","href","body","appendChild","click","removeChild"],"sources":["/Users/emperinter/app/HTML/watermark-vue/src/components/ImageWatermark.vue"],"sourcesContent":["<template>\n  <div>\n    <input type=\"file\" @change=\"handleFileUpload\">\n    <canvas ref=\"canvas\"></canvas>\n    <button @click=\"downloadImage\">Download</button>\n  </div>\n</template>\n\n<script>\n// import watermark from 'watermarkjs';\n\nexport default {\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = this.$refs.canvas;\n          const context = canvas.getContext('2d');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          context.drawImage(img, 0, 0, canvas.width, canvas.height);\n          const watermarkImg = new Image();\n          watermarkImg.onload = () => {\n            context.drawImage(watermarkImg, canvas.width / 2 - watermarkImg.width / 2, canvas.height / 2 - watermarkImg.height / 2);\n          };\n          watermarkImg.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${canvas.width} ${canvas.height}'%3E%3Ctext x='${canvas.width / 2}' y='${canvas.height / 2}' font-family='Arial' font-size='50' fill='black' text-anchor='middle' transform='rotate(-45 ${canvas.width / 2} ${canvas.height / 2})'%3EMy Custom Watermark%3C/text%3E%3C/svg%3E`;\n        };\n        img.src = event.target.result;\n      };\n\n      reader.readAsDataURL(file);\n    },\n    downloadImage() {\n      const canvas = this.$refs.canvas;\n      const dataURL = canvas.toDataURL('image/png');\n      const link = document.createElement('a');\n      link.download = 'watermarked-image.png';\n      link.href = dataURL;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n  },\n};\n</script>\n"],"mappings":"AASA;;AAEA,eAAe;EACbA,OAAO,EAAE;IACPC,gBAAgBA,CAACC,KAAK,EAAE;MACtB,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,MAAMC,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;MAE/BD,MAAM,CAACE,MAAK,GAAKN,KAAK,IAAK;QACzB,MAAMO,GAAE,GAAI,IAAIC,KAAK,CAAC,CAAC;QACvBD,GAAG,CAACD,MAAK,GAAI,MAAM;UACjB,MAAMG,MAAK,GAAI,IAAI,CAACC,KAAK,CAACD,MAAM;UAChC,MAAME,OAAM,GAAIF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;UACvCH,MAAM,CAACI,KAAI,GAAIN,GAAG,CAACM,KAAK;UACxBJ,MAAM,CAACK,MAAK,GAAIP,GAAG,CAACO,MAAM;UAC1BH,OAAO,CAACI,SAAS,CAACR,GAAG,EAAE,CAAC,EAAE,CAAC,EAAEE,MAAM,CAACI,KAAK,EAAEJ,MAAM,CAACK,MAAM,CAAC;UACzD,MAAME,YAAW,GAAI,IAAIR,KAAK,CAAC,CAAC;UAChCQ,YAAY,CAACV,MAAK,GAAI,MAAM;YAC1BK,OAAO,CAACI,SAAS,CAACC,YAAY,EAAEP,MAAM,CAACI,KAAI,GAAI,IAAIG,YAAY,CAACH,KAAI,GAAI,CAAC,EAAEJ,MAAM,CAACK,MAAK,GAAI,IAAIE,YAAY,CAACF,MAAK,GAAI,CAAC,CAAC;UACzH,CAAC;UACDE,YAAY,CAACC,GAAE,GAAK,6EAA4ER,MAAM,CAACI,KAAK,IAAIJ,MAAM,CAACK,MAAO,kBAAiBL,MAAM,CAACI,KAAI,GAAI,CAAE,QAAOJ,MAAM,CAACK,MAAK,GAAI,CAAE,gGAA+FL,MAAM,CAACI,KAAI,GAAI,CAAC,IAAIJ,MAAM,CAACK,MAAK,GAAI,CAAE,+CAA8C;QAC9W,CAAC;QACDP,GAAG,CAACU,GAAE,GAAIjB,KAAK,CAACE,MAAM,CAACgB,MAAM;MAC/B,CAAC;MAEDd,MAAM,CAACe,aAAa,CAAClB,IAAI,CAAC;IAC5B,CAAC;IACDmB,aAAaA,CAAA,EAAG;MACd,MAAMX,MAAK,GAAI,IAAI,CAACC,KAAK,CAACD,MAAM;MAChC,MAAMY,OAAM,GAAIZ,MAAM,CAACa,SAAS,CAAC,WAAW,CAAC;MAC7C,MAAMC,IAAG,GAAIC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACxCF,IAAI,CAACG,QAAO,GAAI,uBAAuB;MACvCH,IAAI,CAACI,IAAG,GAAIN,OAAO;MACnBG,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;MAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC;MACZN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,IAAI,CAAC;IACjC;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}