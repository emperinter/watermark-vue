{"ast":null,"code":"export default {\n  data() {\n    return {\n      watermarkText: 'My Custom Watermark',\n      fontSize: 50,\n      color: '#000000',\n      angle: -45\n    };\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n      reader.onload = event => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = this.$refs.canvas;\n          const context = canvas.getContext('2d');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          context.drawImage(img, 0, 0, canvas.width, canvas.height);\n          const watermarkImg = new Image();\n          watermarkImg.onload = () => {\n            const watermarkCanvas = document.createElement('canvas');\n            watermarkCanvas.width = canvas.width;\n            watermarkCanvas.height = canvas.height;\n            const watermarkContext = watermarkCanvas.getContext('2d');\n            watermarkContext.font = `${this.fontSize}px Arial`;\n            watermarkContext.fillStyle = this.color;\n            watermarkContext.textAlign = 'center';\n            watermarkContext.textBaseline = 'middle';\n            watermarkContext.translate(canvas.width / 2, canvas.height / 2);\n            watermarkContext.rotate(this.angle * Math.PI / 180);\n            watermarkContext.fillText(this.watermarkText, 0, 0);\n            context.drawImage(watermarkCanvas, 0, 0);\n          };\n          watermarkImg.src = '';\n        };\n        img.src = event.target.result;\n      };\n      reader.readAsDataURL(file);\n    },\n    downloadImage() {\n      const canvas = this.$refs.canvas;\n      const dataURL = canvas.toDataURL('image/png');\n      const link = document.createElement('a');\n      link.download = 'watermarked-image.png';\n      link.href = dataURL;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }\n};","map":{"version":3,"names":["data","watermarkText","fontSize","color","angle","methods","handleFileUpload","event","file","target","files","reader","FileReader","onload","img","Image","canvas","$refs","context","getContext","width","height","drawImage","watermarkImg","watermarkCanvas","document","createElement","watermarkContext","font","fillStyle","textAlign","textBaseline","translate","rotate","Math","PI","fillText","src","result","readAsDataURL","downloadImage","dataURL","toDataURL","link","download","href","body","appendChild","click","removeChild"],"sources":["/Users/emperinter/app/HTML/watermark-vue/src/components/ImageWatermark.vue"],"sourcesContent":["<template>\n  <div>\n    <input type=\"file\" @change=\"handleFileUpload\">\n    <canvas ref=\"canvas\"></canvas>\n    <div>\n      <label for=\"text-input\">Watermark Text:</label>\n      <input type=\"text\" id=\"text-input\" v-model=\"watermarkText\">\n    </div>\n    <div>\n      <label for=\"font-size-input\">Font Size:</label>\n      <input type=\"number\" id=\"font-size-input\" v-model.number=\"fontSize\">\n    </div>\n    <div>\n      <label for=\"color-input\">Color:</label>\n      <input type=\"color\" id=\"color-input\" v-model=\"color\">\n    </div>\n    <div>\n      <label for=\"angle-input\">Angle:</label>\n      <input type=\"number\" id=\"angle-input\" v-model.number=\"angle\">\n    </div>\n    <button @click=\"downloadImage\">Download</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      watermarkText: 'My Custom Watermark',\n      fontSize: 50,\n      color: '#000000',\n      angle: -45,\n    };\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = this.$refs.canvas;\n          const context = canvas.getContext('2d');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          context.drawImage(img, 0, 0, canvas.width, canvas.height);\n          const watermarkImg = new Image();\n          watermarkImg.onload = () => {\n            const watermarkCanvas = document.createElement('canvas');\n            watermarkCanvas.width = canvas.width;\n            watermarkCanvas.height = canvas.height;\n            const watermarkContext = watermarkCanvas.getContext('2d');\n            watermarkContext.font = `${this.fontSize}px Arial`;\n            watermarkContext.fillStyle = this.color;\n            watermarkContext.textAlign = 'center';\n            watermarkContext.textBaseline = 'middle';\n            watermarkContext.translate(canvas.width / 2, canvas.height / 2);\n            watermarkContext.rotate((this.angle * Math.PI) / 180);\n            watermarkContext.fillText(this.watermarkText, 0, 0);\n            context.drawImage(watermarkCanvas, 0, 0);\n          };\n          watermarkImg.src = '';\n        };\n        img.src = event.target.result;\n      };\n\n      reader.readAsDataURL(file);\n    },\n    downloadImage() {\n      const canvas = this.$refs.canvas;\n      const dataURL = canvas.toDataURL('image/png');\n      const link = document.createElement('a');\n      link.download = 'watermarked-image.png';\n      link.href = dataURL;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}