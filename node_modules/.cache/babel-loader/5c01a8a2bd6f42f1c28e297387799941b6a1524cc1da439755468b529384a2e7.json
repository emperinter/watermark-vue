{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/web.dom-exception.stack.js\");\nrequire(\"core-js/modules/esnext.typed-array.to-reversed.js\");\nrequire(\"core-js/modules/esnext.typed-array.to-sorted.js\");\nrequire(\"core-js/modules/esnext.typed-array.with.js\");\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define([], factory);else if (typeof exports === 'object') exports[\"watermark\"] = factory();else root[\"watermark\"] = factory();\n})(window, function () {\n  return (/******/function (modules) {\n      // webpackBootstrap\n      /******/ // The module cache\n      /******/\n      var installedModules = {};\n      /******/\n      /******/ // The require function\n      /******/\n      function __webpack_require__(moduleId) {\n        /******/\n        /******/ // Check if module is in cache\n        /******/if (installedModules[moduleId]) {\n          /******/return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/ // Create a new module (and put it into the cache)\n        /******/\n        var module = installedModules[moduleId] = {\n          /******/i: moduleId,\n          /******/l: false,\n          /******/exports: {}\n          /******/\n        };\n        /******/\n        /******/ // Execute the module function\n        /******/\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n        /******/ // Flag the module as loaded\n        /******/\n        module.l = true;\n        /******/\n        /******/ // Return the exports of the module\n        /******/\n        return module.exports;\n        /******/\n      }\n      /******/\n      /******/\n      /******/ // expose the modules object (__webpack_modules__)\n      /******/\n      __webpack_require__.m = modules;\n      /******/\n      /******/ // expose the module cache\n      /******/\n      __webpack_require__.c = installedModules;\n      /******/\n      /******/ // define getter function for harmony exports\n      /******/\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/if (!__webpack_require__.o(exports, name)) {\n          /******/Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n      };\n      /******/\n      /******/ // define __esModule on exports\n      /******/\n      __webpack_require__.r = function (exports) {\n        /******/if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n      /******/ // create a fake namespace object\n      /******/ // mode & 1: value is a module id, require it\n      /******/ // mode & 2: merge all properties of value into the ns\n      /******/ // mode & 4: return value when already ns object\n      /******/ // mode & 8|1: behave like require\n      /******/\n      __webpack_require__.t = function (value, mode) {\n        /******/if (mode & 1) value = __webpack_require__(value);\n        /******/\n        if (mode & 8) return value;\n        /******/\n        if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n        /******/\n        var ns = Object.create(null);\n        /******/\n        __webpack_require__.r(ns);\n        /******/\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n        if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) {\n          return value[key];\n        }.bind(null, key));\n        /******/\n        return ns;\n        /******/\n      };\n      /******/\n      /******/ // getDefaultExport function for compatibility with non-harmony modules\n      /******/\n      __webpack_require__.n = function (module) {\n        /******/var getter = module && module.__esModule ? /******/function getDefault() {\n          return module['default'];\n        } : /******/function getModuleExports() {\n          return module;\n        };\n        /******/\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n        return getter;\n        /******/\n      };\n      /******/\n      /******/ // Object.prototype.hasOwnProperty.call\n      /******/\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n      /******/ // __webpack_public_path__\n      /******/\n      __webpack_require__.p = \"\";\n      /******/\n      /******/\n      /******/ // Load entry module and return exports\n      /******/\n      return __webpack_require__(__webpack_require__.s = 0);\n      /******/\n    }\n    /************************************************************************/\n    /******/([/* 0 */\n    /***/function (module, exports, __webpack_require__) {\n      module.exports = __webpack_require__(1).default;\n\n      /***/\n    }, /* 1 */\n    /***/function (module, __webpack_exports__, __webpack_require__) {\n      \"use strict\";\n\n      __webpack_require__.r(__webpack_exports__);\n      var style_image_namespaceObject = {};\n      __webpack_require__.r(style_image_namespaceObject);\n      __webpack_require__.d(style_image_namespaceObject, \"atPos\", function () {\n        return atPos;\n      });\n      __webpack_require__.d(style_image_namespaceObject, \"lowerRight\", function () {\n        return lowerRight;\n      });\n      __webpack_require__.d(style_image_namespaceObject, \"upperRight\", function () {\n        return upperRight;\n      });\n      __webpack_require__.d(style_image_namespaceObject, \"lowerLeft\", function () {\n        return lowerLeft;\n      });\n      __webpack_require__.d(style_image_namespaceObject, \"upperLeft\", function () {\n        return upperLeft;\n      });\n      __webpack_require__.d(style_image_namespaceObject, \"center\", function () {\n        return center;\n      });\n      var text_namespaceObject = {};\n      __webpack_require__.r(text_namespaceObject);\n      __webpack_require__.d(text_namespaceObject, \"atPos\", function () {\n        return text_atPos;\n      });\n      __webpack_require__.d(text_namespaceObject, \"lowerRight\", function () {\n        return text_lowerRight;\n      });\n      __webpack_require__.d(text_namespaceObject, \"lowerLeft\", function () {\n        return text_lowerLeft;\n      });\n      __webpack_require__.d(text_namespaceObject, \"upperRight\", function () {\n        return text_upperRight;\n      });\n      __webpack_require__.d(text_namespaceObject, \"upperLeft\", function () {\n        return text_upperLeft;\n      });\n      __webpack_require__.d(text_namespaceObject, \"center\", function () {\n        return text_center;\n      });\n\n      // CONCATENATED MODULE: ./lib/functions/index.js\n      /**\n       * Return a function that executes a sequence of functions from left to right,\n       * passing the result of a previous operation to the next\n       *\n       * @param {...funcs}\n       * @return {Function}\n       */\n      function sequence() {\n        for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n          funcs[_key] = arguments[_key];\n        }\n        return function (value) {\n          return funcs.reduce(function (val, fn) {\n            return fn.call(null, val);\n          }, value);\n        };\n      }\n      /**\n       * Return the argument passed to it\n       *\n       * @param {Mixed} x\n       * @return {Mixed}\n       */\n\n      function identity(x) {\n        return x;\n      }\n      // CONCATENATED MODULE: ./lib/image/index.js\n      function _typeof(obj) {\n        if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n          _typeof = function _typeof(obj) {\n            return typeof obj;\n          };\n        } else {\n          _typeof = function _typeof(obj) {\n            return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n          };\n        }\n        return _typeof(obj);\n      }\n\n      /**\n       * Set the src of an image object and call the resolve function\n       * once it has loaded\n       *\n       * @param {Image} img\n       * @param {String} src\n       * @param {Function} resolve\n       */\n\n      function setAndResolve(img, src, resolve) {\n        img.onload = function () {\n          return resolve(img);\n        };\n        img.src = src;\n      }\n      /**\n       * Given a resource, return an appropriate loading function for it's type\n       *\n       * @param {String|File|Image} resource\n       * @return {Function}\n       */\n\n      function getLoader(resource) {\n        var type = _typeof(resource);\n        if (type === 'string') {\n          return loadUrl;\n        }\n        if (resource instanceof Image) {\n          return identity;\n        }\n        return loadFile;\n      }\n      /**\n       * Used for loading image resources asynchronously and maintaining\n       * the supplied order of arguments\n       *\n       * @param {Array} resources - a mixed array of urls, File objects, or Image objects\n       * @param {Function} init - called at the beginning of resource initialization\n       * @return {Promise}\n       */\n\n      function image_load(resources, init) {\n        var promises = [];\n        for (var i = 0; i < resources.length; i++) {\n          var resource = resources[i];\n          var loader = getLoader(resource);\n          var promise = loader(resource, init);\n          promises.push(promise);\n        }\n        return Promise.all(promises);\n      }\n      /**\n       * Load an image by its url\n       *\n       * @param {String} url\n       * @param {Function} init - an optional image initializer\n       * @return {Promise}\n       */\n\n      function loadUrl(url, init) {\n        var img = new Image();\n        typeof init === 'function' && init(img);\n        return new Promise(function (resolve) {\n          img.onload = function () {\n            return resolve(img);\n          };\n          img.src = url;\n        });\n      }\n      /**\n       * Return a collection of images from an\n       * array of File objects\n       *\n       * @param {File} file\n       * @return {Promise}\n       */\n\n      function loadFile(file) {\n        var reader = new FileReader();\n        return new Promise(function (resolve) {\n          var img = new Image();\n          reader.onloadend = function () {\n            return setAndResolve(img, reader.result, resolve);\n          };\n          reader.readAsDataURL(file);\n        });\n      }\n      /**\n       * Create a new image, optionally configuring it's onload behavior\n       *\n       * @param {String} url\n       * @param {Function} onload\n       * @return {Image}\n       */\n\n      function createImage(url, onload) {\n        var img = new Image();\n        if (typeof onload === 'function') {\n          img.onload = onload;\n        }\n        img.src = url;\n        return img;\n      }\n      /**\n       * Draw an image to a canvas element\n       *\n       * @param {Image} img\n       * @param {HTMLCanvasElement} canvas\n       * @return {HTMLCanvasElement}\n       */\n\n      function drawImage(img, canvas) {\n        var ctx = canvas.getContext('2d');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        ctx.drawImage(img, 0, 0);\n        return canvas;\n      }\n      /**\n       * Convert an Image object to a canvas\n       *\n       * @param {Image} img\n       * @param {CanvasPool} pool\n       * @return {HTMLCanvasElement}\n       */\n\n      function imageToCanvas(img, pool) {\n        var canvas = pool.pop();\n        return drawImage(img, canvas);\n      }\n      /**\n       * Convert an array of image objects\n       * to canvas elements\n       *\n       * @param {Array} images\n       * @param {CanvasPool} pool\n       * @return {HTMLCanvasElement[]}\n       */\n\n      function mapToCanvas(images, pool) {\n        return images.map(function (img) {\n          return imageToCanvas(img, pool);\n        });\n      }\n      // CONCATENATED MODULE: ./lib/canvas/index.js\n      /**\n       * Get the data url of a canvas\n       *\n       * @param {HTMLCanvasElement}\n       * @param {Paramters} Specifications according to HTMLCanvasElement.toDataURL() Documentation\n       * @return {String}\n       */\n      function canvas_dataUrl(canvas) {\n        var parameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n          type: 'image/png',\n          encoderOptions: 0.92\n        };\n        return canvas.toDataURL(parameters.type, parameters.encoderOptions);\n      }\n      // CONCATENATED MODULE: ./lib/blob/index.js\n\n      var url = /^data:([^;]+);base64,(.*)$/;\n      /**\n       * Split a data url into a content type and raw data\n       *\n       * @param {String} dataUrl\n       * @return {Array}\n       */\n\n      function split(dataUrl) {\n        return url.exec(dataUrl).slice(1);\n      }\n      /**\n       * Decode a base64 string\n       *\n       * @param {String} base64\n       * @return {String}\n       */\n\n      function decode(base64) {\n        return window.atob(base64);\n      }\n      /**\n       * Return a string of raw data as a Uint8Array\n       *\n       * @param {String} data\n       * @return {UInt8Array}\n       */\n\n      function uint8(data) {\n        var length = data.length;\n        var uints = new Uint8Array(length);\n        for (var i = 0; i < length; i++) {\n          uints[i] = data.charCodeAt(i);\n        }\n        return uints;\n      }\n      /**\n       * Turns a data url into a blob object\n       *\n       * @param {String} dataUrl\n       * @return {Blob}\n       */\n\n      var blob_blob = sequence(split, function (parts) {\n        return [decode(parts[1]), parts[0]];\n      }, function (blob) {\n        return new Blob([uint8(blob[0])], {\n          type: blob[1]\n        });\n      });\n      // CONCATENATED MODULE: ./lib/style/image/index.js\n      /**\n       * Return a function for positioning a watermark on a target canvas\n       *\n       * @param {Function} xFn - a function to determine an x value\n       * @param {Function} yFn - a function to determine a y value\n       * @param {Number} alpha\n       * @return {Function}\n       */\n      function atPos(xFn, yFn, alpha) {\n        alpha || (alpha = 1.0);\n        return function (target, watermark) {\n          var context = target.getContext('2d');\n          context.save();\n          context.globalAlpha = alpha;\n          context.drawImage(watermark, xFn(target, watermark), yFn(target, watermark));\n          context.restore();\n          return target;\n        };\n      }\n      /**\n       * Place the watermark in the lower right corner of the target\n       * image\n       *\n       * @param {Number} alpha\n       * @return {Function}\n       */\n\n      function lowerRight(alpha) {\n        return atPos(function (target, mark) {\n          return target.width - (mark.width + 10);\n        }, function (target, mark) {\n          return target.height - (mark.height + 10);\n        }, alpha);\n      }\n      /**\n       * Place the watermark in the upper right corner of the target\n       * image\n       *\n       * @param {Number} alpha\n       * @return {Function}\n       */\n\n      function upperRight(alpha) {\n        return atPos(function (target, mark) {\n          return target.width - (mark.width + 10);\n        }, function (target, mark) {\n          return 10;\n        }, alpha);\n      }\n      /**\n       * Place the watermark in the lower left corner of the target\n       * image\n       *\n       * @param {Number} alpha\n       * @return {Function}\n       */\n\n      function lowerLeft(alpha) {\n        return atPos(function (target, mark) {\n          return 10;\n        }, function (target, mark) {\n          return target.height - (mark.height + 10);\n        }, alpha);\n      }\n      /**\n       * Place the watermark in the upper left corner of the target\n       * image\n       *\n       * @param {Number} alpha\n       * @return {Function}\n       */\n\n      function upperLeft(alpha) {\n        return atPos(function (target, mark) {\n          return 10;\n        }, function (target, mark) {\n          return 10;\n        }, alpha);\n      }\n      /**\n       * Place the watermark in the center of the target\n       * image\n       *\n       * @param {Number} alpha\n       * @return {Function}\n       */\n\n      function center(alpha) {\n        return atPos(function (target, mark) {\n          return (target.width - mark.width) / 2;\n        }, function (target, mark) {\n          return (target.height - mark.height) / 2;\n        }, alpha);\n      }\n      // CONCATENATED MODULE: ./lib/style/text/index.js\n      /**\n       * Return a function for positioning a watermark on a target canvas\n       *\n       * @param {Function} xFn - a function to determine an x value\n       * @param {Function} yFn - a function to determine a y value\n       * @param {String} text - the text to write\n       * @param {String} font - same as the CSS font property\n       * @param {String} fillStyle\n       * @param {Number} alpha\n       * @return {Function}\n       */\n      function text_atPos(xFn, yFn, text, font, fillStyle, alpha) {\n        alpha || (alpha = 1.0);\n        return function (target) {\n          var context = target.getContext('2d');\n          context.save();\n          context.globalAlpha = alpha;\n          context.fillStyle = fillStyle;\n          context.font = font;\n          var metrics = context.measureText(text);\n          context.fillText(text, xFn(target, metrics, context), yFn(target, metrics, context));\n          context.restore();\n          return target;\n        };\n      }\n      /**\n       * Write text to the lower right corner of the target canvas\n       *\n       * @param {String} text - the text to write\n       * @param {String} font - same as the CSS font property\n       * @param {String} fillStyle\n       * @param {Number} alpha - control text transparency\n       * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n       * @return {Function}\n       */\n\n      function text_lowerRight(text, font, fillStyle, alpha, y) {\n        return text_atPos(function (target, metrics) {\n          return target.width - (metrics.width + 10);\n        }, function (target) {\n          return y || target.height - 10;\n        }, text, font, fillStyle, alpha);\n      }\n      /**\n       * Write text to the lower left corner of the target canvas\n       *\n       * @param {String} text - the text to write\n       * @param {String} font - same as the CSS font property\n       * @param {String} fillStyle\n       * @param {Number} alpha - control text transparency\n       * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n       * @return {Function}\n       */\n\n      function text_lowerLeft(text, font, fillStyle, alpha, y) {\n        return text_atPos(function () {\n          return 10;\n        }, function (target) {\n          return y || target.height - 10;\n        }, text, font, fillStyle, alpha);\n      }\n      /**\n       * Write text to the upper right corner of the target canvas\n       *\n       * @param {String} text - the text to write\n       * @param {String} font - same as the CSS font property\n       * @param {String} fillStyle\n       * @param {Number} alpha - control text transparency\n       * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n       * @return {Function}\n       */\n\n      function text_upperRight(text, font, fillStyle, alpha, y) {\n        return text_atPos(function (target, metrics) {\n          return target.width - (metrics.width + 10);\n        }, function () {\n          return y || 20;\n        }, text, font, fillStyle, alpha);\n      }\n      /**\n       * Write text to the upper left corner of the target canvas\n       *\n       * @param {String} text - the text to write\n       * @param {String} font - same as the CSS font property\n       * @param {String} fillStyle\n       * @param {Number} alpha - control text transparency\n       * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n       * @return {Function}\n       */\n\n      function text_upperLeft(text, font, fillStyle, alpha, y) {\n        return text_atPos(function () {\n          return 10;\n        }, function () {\n          return y || 20;\n        }, text, font, fillStyle, alpha);\n      }\n      /**\n       * Write text to the center of the target canvas\n       *\n       * @param {String} text - the text to write\n       * @param {String} font - same as the CSS font property\n       * @param {String} fillStyle\n       * @param {Number} alpha - control text transparency\n       * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n       * @return {Function}\n       */\n\n      function text_center(text, font, fillStyle, alpha, y) {\n        return text_atPos(function (target, metrics, ctx) {\n          ctx.textAlign = 'center';\n          return target.width / 2;\n        }, function (target, metrics, ctx) {\n          ctx.textBaseline = 'middle';\n          return target.height / 2;\n        }, text, font, fillStyle, alpha);\n      }\n      // CONCATENATED MODULE: ./lib/style/index.js\n\n      /**\n       * @typedef {Object} DrawResult\n       * @property {HTMLCanvasElement} canvas - the end result of a draw\n       * @property {HTMLCanvasElement[]} sources - the sources used in the draw\n       */\n\n      var style_image = style_image_namespaceObject;\n      var style_text = text_namespaceObject;\n      /**\n       * Create a DrawResult by apply a list of canvas elements to a draw function\n       *\n       * @param {Function} draw - the draw function used to create a DrawResult\n       * @param {HTMLCanvasElement} sources - the canvases used by the draw function\n       * @return {DrawResult}\n       */\n\n      function style_result(draw, sources) {\n        var canvas = draw.apply(null, sources);\n        return {\n          canvas: canvas,\n          sources: sources\n        };\n      }\n      // CONCATENATED MODULE: ./lib/object/index.js\n      /**\n       * Extend one object with the properties of another\n       *\n       * @param {Object} first\n       * @param {Object} second\n       * @return {Object}\n       */\n      function extend(first, second) {\n        var secondKeys = Object.keys(second);\n        secondKeys.forEach(function (key) {\n          return first[key] = second[key];\n        });\n        return first;\n      }\n      /**\n       * Create a shallow copy of the object\n       *\n       * @param {Object} obj\n       * @return {Object}\n       */\n\n      function clone(obj) {\n        return extend({}, obj);\n      }\n      // CONCATENATED MODULE: ./lib/canvas/pool.js\n      /**\n       * An immutable canvas pool allowing more efficient use of canvas resources\n       *\n       * @typedef {Object} CanvasPool\n       * @property {Function} pop - return a promise that will evaluate to a canvas\n       * @property {Number} length - the number of available canvas elements\n       * @property {HTMLCanvasElement[]} elements - the canvas elements used by the pool\n       * @property {Function} clear - empty the pool of canvas elements\n       * @property {Function} release - free a pool up for release and return the data url\n       */\n\n      /**\n       * Create a CanvasPool with the given size\n       *\n       * @param {Number} size\n       * @param {HTMLCanvasElement[]} elements\n       * @param {EventEmitter} eventEmitter\n       * @return {CanvasPool}\n       */\n      function CanvasPool() {\n        var canvases = [];\n        return {\n          /**\n           * Get the next available canvas from the pool\n           *\n           * @return {HTMLCanvasElement}\n           */\n          pop: function pop() {\n            if (this.length === 0) {\n              canvases.push(document.createElement('canvas'));\n            }\n            return canvases.pop();\n          },\n          /**\n           * Return the number of available canvas elements in the pool\n           *\n           * @return {Number}\n           */\n          get length() {\n            return canvases.length;\n          },\n          /**\n           * Return a canvas to the pool. This function will clear the canvas for reuse\n           *\n           * @param {HTMLCanvasElement} canvas\n           * @return {String}\n           */\n          release: function release(canvas) {\n            var context = canvas.getContext('2d');\n            context.clearRect(0, 0, canvas.width, canvas.height);\n            canvases.push(canvas);\n          },\n          /**\n           * Empty the pool, destroying any references to canvas objects\n           */\n          clear: function clear() {\n            canvases.splice(0, canvases.length);\n          },\n          /**\n           * Return the collection of canvases in the pool\n           *\n           * @return {HTMLCanvasElement[]}\n           */\n          get elements() {\n            return canvases;\n          }\n        };\n      }\n      var shared = CanvasPool();\n      /* harmony default export */\n      var canvas_pool = shared;\n      // CONCATENATED MODULE: ./lib/index.js\n      /* harmony export (binding) */\n      __webpack_require__.d(__webpack_exports__, \"default\", function () {\n        return watermark;\n      });\n\n      /**\n       * A configuration type for the watermark function\n       *\n       * @typedef {Object} Options\n       * @property {Function} init - an initialization function that is given Image objects before loading (only applies if resources is a collection of urls)\n       * @property {ImageFormat} type - specify the image format to be used when retrieving result (only supports \"image/png\" or \"image/jpeg\", default \"image/png\")\n       * @property {Number} encoderOptions - specify the image compression quality from 0 to 1 (default 0.92)\n       * @property {Number} poolSize - number of canvas elements available for drawing,\n       * @property {CanvasPool} pool - the pool used. If provided, poolSize will be ignored\n       */\n\n      /**\n       * @constant\n       * @type {Options}\n       */\n\n      var defaults = {\n        init: function init() {},\n        type: 'image/png',\n        encoderOptions: 0.92\n      };\n      /**\n       * Merge the given options with the defaults\n       *\n       * @param {Options} options\n       * @return {Options}\n       */\n\n      function mergeOptions(options) {\n        return extend(clone(defaults), options);\n      }\n      /**\n       * Release canvases from a draw result for reuse. Returns\n       * the dataURL from the result's canvas\n       *\n       * @param {DrawResult} result\n       * @param {CanvasPool} pool\n       * @return  {String}\n       */\n\n      function release(result, pool, parameters) {\n        var canvas = result.canvas,\n          sources = result.sources;\n        var dataURL = canvas_dataUrl(canvas, parameters);\n        sources.forEach(pool.release);\n        return dataURL;\n      }\n      /**\n       * Return a watermark object\n       *\n       *\n       * @param {Array} resources - a collection of urls, File objects, or Image objects\n       * @param {Options} options - a configuration object for watermark\n       * @param {Promise} promise - optional\n       * @return {Object}\n       */\n\n      function watermark(resources) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var promise = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var opts = mergeOptions(options);\n        promise || (promise = image_load(resources, opts.init));\n        return {\n          /**\n           * Convert the watermarked image into a dataUrl. The draw\n           * function is given all images as canvas elements in order\n           *\n           * @param {Function} draw\n           * @return {Object}\n           */\n          dataUrl: function dataUrl(draw) {\n            var promise = this.then(function (images) {\n              return mapToCanvas(images, canvas_pool);\n            }).then(function (canvases) {\n              return style_result(draw, canvases);\n            }).then(function (result) {\n              return release(result, canvas_pool, {\n                type: opts.type,\n                encoderOptions: opts.encoderOptions\n              });\n            });\n            return watermark(resources, opts, promise);\n          },\n          /**\n           * Load additional resources\n           *\n           * @param {Array} resources - a collection of urls, File objects, or Image objects\n           * @param {Function} init - an initialization function that is given Image objects before loading (only applies if resources is a collection of urls)\n           * @return {Object}\n           */\n          load: function load(resources, init) {\n            var promise = this.then(function (resource) {\n              return image_load([resource].concat(resources), init);\n            });\n            return watermark(resources, opts, promise);\n          },\n          /**\n           * Render the current state of the watermarked image. Useful for performing\n           * actions after the watermark has been applied\n           *\n           * @return {Object}\n           */\n          render: function render() {\n            var promise = this.then(function (resource) {\n              return image_load([resource]);\n            });\n            return watermark(resources, opts, promise);\n          },\n          /**\n           * Convert the watermark into a blob\n           *\n           * @param {Function} draw\n           * @return {Object}\n           */\n          blob: function blob(draw) {\n            var promise = this.dataUrl(draw).then(blob_blob);\n            return watermark(resources, opts, promise);\n          },\n          /**\n           * Convert the watermark into an image using the given draw function\n           *\n           * @param {Function} draw\n           * @return {Object}\n           */\n          image: function image(draw) {\n            var promise = this.dataUrl(draw).then(createImage);\n            return watermark(resources, opts, promise);\n          },\n          /**\n           * Delegate to the watermark promise\n           *\n           * @return {Promise}\n           */\n          then: function then() {\n            for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n              funcs[_key] = arguments[_key];\n            }\n            return promise.then.apply(promise, funcs);\n          }\n        };\n      }\n      ;\n      /**\n       * Style functions\n       */\n\n      watermark.image = style_image;\n      watermark.text = style_text;\n      /**\n       * Clean up all canvas references\n       */\n\n      watermark.destroy = function () {\n        return canvas_pool.clear();\n      };\n\n      /***/\n    }\n    /******/])\n  );\n});","map":{"version":3,"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","default","__webpack_exports__","style_image_namespaceObject","atPos","lowerRight","upperRight","lowerLeft","upperLeft","center","text_namespaceObject","text_atPos","text_lowerRight","text_lowerLeft","text_upperRight","text_upperLeft","text_center","sequence","_len","arguments","length","funcs","Array","_key","reduce","val","fn","identity","x","_typeof","obj","iterator","constructor","setAndResolve","img","src","resolve","onload","getLoader","resource","type","loadUrl","Image","loadFile","image_load","resources","init","promises","loader","promise","push","Promise","all","url","file","reader","FileReader","onloadend","result","readAsDataURL","createImage","drawImage","canvas","ctx","getContext","width","height","imageToCanvas","pool","pop","mapToCanvas","images","map","canvas_dataUrl","parameters","undefined","encoderOptions","toDataURL","split","dataUrl","exec","slice","decode","base64","atob","uint8","data","uints","Uint8Array","charCodeAt","blob_blob","parts","blob","Blob","xFn","yFn","alpha","target","watermark","context","save","globalAlpha","restore","mark","text","font","fillStyle","metrics","measureText","fillText","y","textAlign","textBaseline","style_image","style_text","style_result","draw","sources","apply","extend","first","second","secondKeys","keys","forEach","clone","CanvasPool","canvases","document","createElement","release","clearRect","clear","splice","elements","shared","canvas_pool","defaults","mergeOptions","options","dataURL","opts","then","load","concat","render","image","destroy"],"sources":["/Users/emperinter/app/HTML/watermark-vue/node_modules/watermarkjs/dist/watermark.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"watermark\"] = factory();\n\telse\n\t\troot[\"watermark\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1).default;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\nvar style_image_namespaceObject = {};\n__webpack_require__.r(style_image_namespaceObject);\n__webpack_require__.d(style_image_namespaceObject, \"atPos\", function() { return atPos; });\n__webpack_require__.d(style_image_namespaceObject, \"lowerRight\", function() { return lowerRight; });\n__webpack_require__.d(style_image_namespaceObject, \"upperRight\", function() { return upperRight; });\n__webpack_require__.d(style_image_namespaceObject, \"lowerLeft\", function() { return lowerLeft; });\n__webpack_require__.d(style_image_namespaceObject, \"upperLeft\", function() { return upperLeft; });\n__webpack_require__.d(style_image_namespaceObject, \"center\", function() { return center; });\nvar text_namespaceObject = {};\n__webpack_require__.r(text_namespaceObject);\n__webpack_require__.d(text_namespaceObject, \"atPos\", function() { return text_atPos; });\n__webpack_require__.d(text_namespaceObject, \"lowerRight\", function() { return text_lowerRight; });\n__webpack_require__.d(text_namespaceObject, \"lowerLeft\", function() { return text_lowerLeft; });\n__webpack_require__.d(text_namespaceObject, \"upperRight\", function() { return text_upperRight; });\n__webpack_require__.d(text_namespaceObject, \"upperLeft\", function() { return text_upperLeft; });\n__webpack_require__.d(text_namespaceObject, \"center\", function() { return text_center; });\n\n// CONCATENATED MODULE: ./lib/functions/index.js\n/**\n * Return a function that executes a sequence of functions from left to right,\n * passing the result of a previous operation to the next\n *\n * @param {...funcs}\n * @return {Function}\n */\nfunction sequence() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  return function (value) {\n    return funcs.reduce(function (val, fn) {\n      return fn.call(null, val);\n    }, value);\n  };\n}\n/**\n * Return the argument passed to it\n *\n * @param {Mixed} x\n * @return {Mixed}\n */\n\nfunction identity(x) {\n  return x;\n}\n// CONCATENATED MODULE: ./lib/image/index.js\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n/**\n * Set the src of an image object and call the resolve function\n * once it has loaded\n *\n * @param {Image} img\n * @param {String} src\n * @param {Function} resolve\n */\n\nfunction setAndResolve(img, src, resolve) {\n  img.onload = function () {\n    return resolve(img);\n  };\n\n  img.src = src;\n}\n/**\n * Given a resource, return an appropriate loading function for it's type\n *\n * @param {String|File|Image} resource\n * @return {Function}\n */\n\n\nfunction getLoader(resource) {\n  var type = _typeof(resource);\n\n  if (type === 'string') {\n    return loadUrl;\n  }\n\n  if (resource instanceof Image) {\n    return identity;\n  }\n\n  return loadFile;\n}\n/**\n * Used for loading image resources asynchronously and maintaining\n * the supplied order of arguments\n *\n * @param {Array} resources - a mixed array of urls, File objects, or Image objects\n * @param {Function} init - called at the beginning of resource initialization\n * @return {Promise}\n */\n\nfunction image_load(resources, init) {\n  var promises = [];\n\n  for (var i = 0; i < resources.length; i++) {\n    var resource = resources[i];\n    var loader = getLoader(resource);\n    var promise = loader(resource, init);\n    promises.push(promise);\n  }\n\n  return Promise.all(promises);\n}\n/**\n * Load an image by its url\n *\n * @param {String} url\n * @param {Function} init - an optional image initializer\n * @return {Promise}\n */\n\nfunction loadUrl(url, init) {\n  var img = new Image();\n  typeof init === 'function' && init(img);\n  return new Promise(function (resolve) {\n    img.onload = function () {\n      return resolve(img);\n    };\n\n    img.src = url;\n  });\n}\n/**\n * Return a collection of images from an\n * array of File objects\n *\n * @param {File} file\n * @return {Promise}\n */\n\nfunction loadFile(file) {\n  var reader = new FileReader();\n  return new Promise(function (resolve) {\n    var img = new Image();\n\n    reader.onloadend = function () {\n      return setAndResolve(img, reader.result, resolve);\n    };\n\n    reader.readAsDataURL(file);\n  });\n}\n/**\n * Create a new image, optionally configuring it's onload behavior\n *\n * @param {String} url\n * @param {Function} onload\n * @return {Image}\n */\n\nfunction createImage(url, onload) {\n  var img = new Image();\n\n  if (typeof onload === 'function') {\n    img.onload = onload;\n  }\n\n  img.src = url;\n  return img;\n}\n/**\n * Draw an image to a canvas element\n *\n * @param {Image} img\n * @param {HTMLCanvasElement} canvas\n * @return {HTMLCanvasElement}\n */\n\nfunction drawImage(img, canvas) {\n  var ctx = canvas.getContext('2d');\n  canvas.width = img.width;\n  canvas.height = img.height;\n  ctx.drawImage(img, 0, 0);\n  return canvas;\n}\n/**\n * Convert an Image object to a canvas\n *\n * @param {Image} img\n * @param {CanvasPool} pool\n * @return {HTMLCanvasElement}\n */\n\n\nfunction imageToCanvas(img, pool) {\n  var canvas = pool.pop();\n  return drawImage(img, canvas);\n}\n/**\n * Convert an array of image objects\n * to canvas elements\n *\n * @param {Array} images\n * @param {CanvasPool} pool\n * @return {HTMLCanvasElement[]}\n */\n\nfunction mapToCanvas(images, pool) {\n  return images.map(function (img) {\n    return imageToCanvas(img, pool);\n  });\n}\n// CONCATENATED MODULE: ./lib/canvas/index.js\n/**\n * Get the data url of a canvas\n *\n * @param {HTMLCanvasElement}\n * @param {Paramters} Specifications according to HTMLCanvasElement.toDataURL() Documentation\n * @return {String}\n */\nfunction canvas_dataUrl(canvas) {\n  var parameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    type: 'image/png',\n    encoderOptions: 0.92\n  };\n  return canvas.toDataURL(parameters.type, parameters.encoderOptions);\n}\n// CONCATENATED MODULE: ./lib/blob/index.js\n\nvar url = /^data:([^;]+);base64,(.*)$/;\n/**\n * Split a data url into a content type and raw data\n *\n * @param {String} dataUrl\n * @return {Array}\n */\n\nfunction split(dataUrl) {\n  return url.exec(dataUrl).slice(1);\n}\n/**\n * Decode a base64 string\n *\n * @param {String} base64\n * @return {String}\n */\n\nfunction decode(base64) {\n  return window.atob(base64);\n}\n/**\n * Return a string of raw data as a Uint8Array\n *\n * @param {String} data\n * @return {UInt8Array}\n */\n\nfunction uint8(data) {\n  var length = data.length;\n  var uints = new Uint8Array(length);\n\n  for (var i = 0; i < length; i++) {\n    uints[i] = data.charCodeAt(i);\n  }\n\n  return uints;\n}\n/**\n * Turns a data url into a blob object\n *\n * @param {String} dataUrl\n * @return {Blob}\n */\n\nvar blob_blob = sequence(split, function (parts) {\n  return [decode(parts[1]), parts[0]];\n}, function (blob) {\n  return new Blob([uint8(blob[0])], {\n    type: blob[1]\n  });\n});\n// CONCATENATED MODULE: ./lib/style/image/index.js\n/**\n * Return a function for positioning a watermark on a target canvas\n *\n * @param {Function} xFn - a function to determine an x value\n * @param {Function} yFn - a function to determine a y value\n * @param {Number} alpha\n * @return {Function}\n */\nfunction atPos(xFn, yFn, alpha) {\n  alpha || (alpha = 1.0);\n  return function (target, watermark) {\n    var context = target.getContext('2d');\n    context.save();\n    context.globalAlpha = alpha;\n    context.drawImage(watermark, xFn(target, watermark), yFn(target, watermark));\n    context.restore();\n    return target;\n  };\n}\n/**\n * Place the watermark in the lower right corner of the target\n * image\n *\n * @param {Number} alpha\n * @return {Function}\n */\n\nfunction lowerRight(alpha) {\n  return atPos(function (target, mark) {\n    return target.width - (mark.width + 10);\n  }, function (target, mark) {\n    return target.height - (mark.height + 10);\n  }, alpha);\n}\n/**\n * Place the watermark in the upper right corner of the target\n * image\n *\n * @param {Number} alpha\n * @return {Function}\n */\n\nfunction upperRight(alpha) {\n  return atPos(function (target, mark) {\n    return target.width - (mark.width + 10);\n  }, function (target, mark) {\n    return 10;\n  }, alpha);\n}\n/**\n * Place the watermark in the lower left corner of the target\n * image\n *\n * @param {Number} alpha\n * @return {Function}\n */\n\nfunction lowerLeft(alpha) {\n  return atPos(function (target, mark) {\n    return 10;\n  }, function (target, mark) {\n    return target.height - (mark.height + 10);\n  }, alpha);\n}\n/**\n * Place the watermark in the upper left corner of the target\n * image\n *\n * @param {Number} alpha\n * @return {Function}\n */\n\nfunction upperLeft(alpha) {\n  return atPos(function (target, mark) {\n    return 10;\n  }, function (target, mark) {\n    return 10;\n  }, alpha);\n}\n/**\n * Place the watermark in the center of the target\n * image\n *\n * @param {Number} alpha\n * @return {Function}\n */\n\nfunction center(alpha) {\n  return atPos(function (target, mark) {\n    return (target.width - mark.width) / 2;\n  }, function (target, mark) {\n    return (target.height - mark.height) / 2;\n  }, alpha);\n}\n// CONCATENATED MODULE: ./lib/style/text/index.js\n/**\n * Return a function for positioning a watermark on a target canvas\n *\n * @param {Function} xFn - a function to determine an x value\n * @param {Function} yFn - a function to determine a y value\n * @param {String} text - the text to write\n * @param {String} font - same as the CSS font property\n * @param {String} fillStyle\n * @param {Number} alpha\n * @return {Function}\n */\nfunction text_atPos(xFn, yFn, text, font, fillStyle, alpha) {\n  alpha || (alpha = 1.0);\n  return function (target) {\n    var context = target.getContext('2d');\n    context.save();\n    context.globalAlpha = alpha;\n    context.fillStyle = fillStyle;\n    context.font = font;\n    var metrics = context.measureText(text);\n    context.fillText(text, xFn(target, metrics, context), yFn(target, metrics, context));\n    context.restore();\n    return target;\n  };\n}\n/**\n * Write text to the lower right corner of the target canvas\n *\n * @param {String} text - the text to write\n * @param {String} font - same as the CSS font property\n * @param {String} fillStyle\n * @param {Number} alpha - control text transparency\n * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n * @return {Function}\n */\n\nfunction text_lowerRight(text, font, fillStyle, alpha, y) {\n  return text_atPos(function (target, metrics) {\n    return target.width - (metrics.width + 10);\n  }, function (target) {\n    return y || target.height - 10;\n  }, text, font, fillStyle, alpha);\n}\n/**\n * Write text to the lower left corner of the target canvas\n *\n * @param {String} text - the text to write\n * @param {String} font - same as the CSS font property\n * @param {String} fillStyle\n * @param {Number} alpha - control text transparency\n * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n * @return {Function}\n */\n\nfunction text_lowerLeft(text, font, fillStyle, alpha, y) {\n  return text_atPos(function () {\n    return 10;\n  }, function (target) {\n    return y || target.height - 10;\n  }, text, font, fillStyle, alpha);\n}\n/**\n * Write text to the upper right corner of the target canvas\n *\n * @param {String} text - the text to write\n * @param {String} font - same as the CSS font property\n * @param {String} fillStyle\n * @param {Number} alpha - control text transparency\n * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n * @return {Function}\n */\n\nfunction text_upperRight(text, font, fillStyle, alpha, y) {\n  return text_atPos(function (target, metrics) {\n    return target.width - (metrics.width + 10);\n  }, function () {\n    return y || 20;\n  }, text, font, fillStyle, alpha);\n}\n/**\n * Write text to the upper left corner of the target canvas\n *\n * @param {String} text - the text to write\n * @param {String} font - same as the CSS font property\n * @param {String} fillStyle\n * @param {Number} alpha - control text transparency\n * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n * @return {Function}\n */\n\nfunction text_upperLeft(text, font, fillStyle, alpha, y) {\n  return text_atPos(function () {\n    return 10;\n  }, function () {\n    return y || 20;\n  }, text, font, fillStyle, alpha);\n}\n/**\n * Write text to the center of the target canvas\n *\n * @param {String} text - the text to write\n * @param {String} font - same as the CSS font property\n * @param {String} fillStyle\n * @param {Number} alpha - control text transparency\n * @param {Number} y - height in text metrics is not very well supported. This is a manual value\n * @return {Function}\n */\n\nfunction text_center(text, font, fillStyle, alpha, y) {\n  return text_atPos(function (target, metrics, ctx) {\n    ctx.textAlign = 'center';\n    return target.width / 2;\n  }, function (target, metrics, ctx) {\n    ctx.textBaseline = 'middle';\n    return target.height / 2;\n  }, text, font, fillStyle, alpha);\n}\n// CONCATENATED MODULE: ./lib/style/index.js\n\n\n/**\n * @typedef {Object} DrawResult\n * @property {HTMLCanvasElement} canvas - the end result of a draw\n * @property {HTMLCanvasElement[]} sources - the sources used in the draw\n */\n\nvar style_image = style_image_namespaceObject;\nvar style_text = text_namespaceObject;\n/**\n * Create a DrawResult by apply a list of canvas elements to a draw function\n *\n * @param {Function} draw - the draw function used to create a DrawResult\n * @param {HTMLCanvasElement} sources - the canvases used by the draw function\n * @return {DrawResult}\n */\n\nfunction style_result(draw, sources) {\n  var canvas = draw.apply(null, sources);\n  return {\n    canvas: canvas,\n    sources: sources\n  };\n}\n// CONCATENATED MODULE: ./lib/object/index.js\n/**\n * Extend one object with the properties of another\n *\n * @param {Object} first\n * @param {Object} second\n * @return {Object}\n */\nfunction extend(first, second) {\n  var secondKeys = Object.keys(second);\n  secondKeys.forEach(function (key) {\n    return first[key] = second[key];\n  });\n  return first;\n}\n/**\n * Create a shallow copy of the object\n *\n * @param {Object} obj\n * @return {Object}\n */\n\nfunction clone(obj) {\n  return extend({}, obj);\n}\n// CONCATENATED MODULE: ./lib/canvas/pool.js\n/**\n * An immutable canvas pool allowing more efficient use of canvas resources\n *\n * @typedef {Object} CanvasPool\n * @property {Function} pop - return a promise that will evaluate to a canvas\n * @property {Number} length - the number of available canvas elements\n * @property {HTMLCanvasElement[]} elements - the canvas elements used by the pool\n * @property {Function} clear - empty the pool of canvas elements\n * @property {Function} release - free a pool up for release and return the data url\n */\n\n/**\n * Create a CanvasPool with the given size\n *\n * @param {Number} size\n * @param {HTMLCanvasElement[]} elements\n * @param {EventEmitter} eventEmitter\n * @return {CanvasPool}\n */\nfunction CanvasPool() {\n  var canvases = [];\n  return {\n    /**\n     * Get the next available canvas from the pool\n     *\n     * @return {HTMLCanvasElement}\n     */\n    pop: function pop() {\n      if (this.length === 0) {\n        canvases.push(document.createElement('canvas'));\n      }\n\n      return canvases.pop();\n    },\n\n    /**\n     * Return the number of available canvas elements in the pool\n     *\n     * @return {Number}\n     */\n    get length() {\n      return canvases.length;\n    },\n\n    /**\n     * Return a canvas to the pool. This function will clear the canvas for reuse\n     *\n     * @param {HTMLCanvasElement} canvas\n     * @return {String}\n     */\n    release: function release(canvas) {\n      var context = canvas.getContext('2d');\n      context.clearRect(0, 0, canvas.width, canvas.height);\n      canvases.push(canvas);\n    },\n\n    /**\n     * Empty the pool, destroying any references to canvas objects\n     */\n    clear: function clear() {\n      canvases.splice(0, canvases.length);\n    },\n\n    /**\n     * Return the collection of canvases in the pool\n     *\n     * @return {HTMLCanvasElement[]}\n     */\n    get elements() {\n      return canvases;\n    }\n\n  };\n}\nvar shared = CanvasPool();\n/* harmony default export */ var canvas_pool = (shared);\n// CONCATENATED MODULE: ./lib/index.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return watermark; });\n\n\n\n\n\n\n/**\n * A configuration type for the watermark function\n *\n * @typedef {Object} Options\n * @property {Function} init - an initialization function that is given Image objects before loading (only applies if resources is a collection of urls)\n * @property {ImageFormat} type - specify the image format to be used when retrieving result (only supports \"image/png\" or \"image/jpeg\", default \"image/png\")\n * @property {Number} encoderOptions - specify the image compression quality from 0 to 1 (default 0.92)\n * @property {Number} poolSize - number of canvas elements available for drawing,\n * @property {CanvasPool} pool - the pool used. If provided, poolSize will be ignored\n */\n\n/**\n * @constant\n * @type {Options}\n */\n\nvar defaults = {\n  init: function init() {},\n  type: 'image/png',\n  encoderOptions: 0.92\n};\n/**\n * Merge the given options with the defaults\n *\n * @param {Options} options\n * @return {Options}\n */\n\nfunction mergeOptions(options) {\n  return extend(clone(defaults), options);\n}\n/**\n * Release canvases from a draw result for reuse. Returns\n * the dataURL from the result's canvas\n *\n * @param {DrawResult} result\n * @param {CanvasPool} pool\n * @return  {String}\n */\n\n\nfunction release(result, pool, parameters) {\n  var canvas = result.canvas,\n      sources = result.sources;\n  var dataURL = canvas_dataUrl(canvas, parameters);\n  sources.forEach(pool.release);\n  return dataURL;\n}\n/**\n * Return a watermark object\n *\n *\n * @param {Array} resources - a collection of urls, File objects, or Image objects\n * @param {Options} options - a configuration object for watermark\n * @param {Promise} promise - optional\n * @return {Object}\n */\n\n\nfunction watermark(resources) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var promise = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var opts = mergeOptions(options);\n  promise || (promise = image_load(resources, opts.init));\n  return {\n    /**\n     * Convert the watermarked image into a dataUrl. The draw\n     * function is given all images as canvas elements in order\n     *\n     * @param {Function} draw\n     * @return {Object}\n     */\n    dataUrl: function dataUrl(draw) {\n      var promise = this.then(function (images) {\n        return mapToCanvas(images, canvas_pool);\n      }).then(function (canvases) {\n        return style_result(draw, canvases);\n      }).then(function (result) {\n        return release(result, canvas_pool, {\n          type: opts.type,\n          encoderOptions: opts.encoderOptions\n        });\n      });\n      return watermark(resources, opts, promise);\n    },\n\n    /**\n     * Load additional resources\n     *\n     * @param {Array} resources - a collection of urls, File objects, or Image objects\n     * @param {Function} init - an initialization function that is given Image objects before loading (only applies if resources is a collection of urls)\n     * @return {Object}\n     */\n    load: function load(resources, init) {\n      var promise = this.then(function (resource) {\n        return image_load([resource].concat(resources), init);\n      });\n      return watermark(resources, opts, promise);\n    },\n\n    /**\n     * Render the current state of the watermarked image. Useful for performing\n     * actions after the watermark has been applied\n     *\n     * @return {Object}\n     */\n    render: function render() {\n      var promise = this.then(function (resource) {\n        return image_load([resource]);\n      });\n      return watermark(resources, opts, promise);\n    },\n\n    /**\n     * Convert the watermark into a blob\n     *\n     * @param {Function} draw\n     * @return {Object}\n     */\n    blob: function blob(draw) {\n      var promise = this.dataUrl(draw).then(blob_blob);\n      return watermark(resources, opts, promise);\n    },\n\n    /**\n     * Convert the watermark into an image using the given draw function\n     *\n     * @param {Function} draw\n     * @return {Object}\n     */\n    image: function image(draw) {\n      var promise = this.dataUrl(draw).then(createImage);\n      return watermark(resources, opts, promise);\n    },\n\n    /**\n     * Delegate to the watermark promise\n     *\n     * @return {Promise}\n     */\n    then: function then() {\n      for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n        funcs[_key] = arguments[_key];\n      }\n\n      return promise.then.apply(promise, funcs);\n    }\n  };\n}\n;\n/**\n * Style functions\n */\n\nwatermark.image = style_image;\nwatermark.text = style_text;\n/**\n * Clean up all canvas references\n */\n\nwatermark.destroy = function () {\n  return canvas_pool.clear();\n};\n\n/***/ })\n/******/ ]);\n});"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}